(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{342:function(t,s,a){t.exports=a.p+"assets/img/20210426154854.bc369066.jpg"},343:function(t,s,a){t.exports=a.p+"assets/img/955BF580-9082-4C29-BED6-AF36682D5DAD.ae09317e.png"},501:function(t,s,a){"use strict";a.r(s);var n=a(15),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"关于进程和线程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关于进程和线程"}},[t._v("#")]),t._v(" 关于进程和线程")]),t._v(" "),n("ul",[n("li",[t._v("一个程序运行时，就是一个进程，这里的程序可以是一段代码，也可以是一个exe应用程序")]),t._v(" "),n("li",[t._v("线程是程序中一个执行流")]),t._v(" "),n("li",[t._v("一个进程包含n个线程，同一个进程中的"),n("strong",[t._v("多个线程")]),t._v("之间的"),n("strong",[t._v("所有变量共享")])]),t._v(" "),n("li",[n("strong",[t._v("多个进程")]),t._v("之间"),n("strong",[t._v("变量不共享")]),t._v("，同一个变量，各自有一份拷贝存在于每个进程中，互不影响")])]),t._v(" "),n("h2",{attrs:{id:"如果理解-javascript-是单线程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#如果理解-javascript-是单线程"}},[t._v("#")]),t._v(" 如果理解 Javascript 是单线程")]),t._v(" "),n("blockquote",[n("p",[t._v("代码依次按顺序执行")]),t._v(" "),n("p",[t._v("作为浏览器脚本语言，JavaScript的主要用途是与用户互动，以及操作DOM")]),t._v(" "),n("p",[t._v("这决定了它只能是单线程，否则会带来很复杂的同步问题")]),t._v(" "),n("p",[t._v("比如，假定JavaScript同时有两个线程，一个线程在某个DOM节点上添加内容，另一个线程删除了这个节点，这时浏览器应该以哪个线程为准？")])]),t._v(" "),n("h2",{attrs:{id:"单线程的-javascript-如何实现异步操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#单线程的-javascript-如何实现异步操作"}},[t._v("#")]),t._v(" 单线程的 javascript 如何实现异步操作")]),t._v(" "),n("h3",{attrs:{id:"概念"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#概念"}},[t._v("#")]),t._v(" 概念")]),t._v(" "),n("ul",[n("li",[t._v("同步：会逐行执行代码，会对后续代码造成阻塞，直至代码接收到预期的结果之后，才会继续向下执行任务")]),t._v(" "),n("li",[t._v("异步：调用之后先不管结果，继续向下执行任务，常见的有：setTimeout, promise, 事件回调等")])]),t._v(" "),n("h3",{attrs:{id:"实现原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实现原理"}},[t._v("#")]),t._v(" 实现原理")]),t._v(" "),n("ol",[n("li",[n("strong",[t._v("浏览器是多线程的")]),t._v(" "),n("img",{attrs:{src:a(342),alt:""}})]),t._v(" "),n("li",[t._v("主线程负责自上而下顺序执行，当遇到setTimeout函数后，便将其交给"),n("code",[t._v("定时器线程")]),t._v("去执行")]),t._v(" "),n("li",[n("code",[t._v("定时器线程")]),t._v("执行完之后，将 "),n("strong",[t._v("满足触发主线程条件的")]),t._v(" 回调函数放到"),n("code",[t._v("任务队列中")]),t._v(", "),n("code",[t._v("任务队列")]),t._v("中的任务不会马上执行")]),t._v(" "),n("li",[t._v("待主线程代码执行完毕，才开始"),n("code",[t._v("任务队列")]),t._v("代码的执行")])]),t._v(" "),n("h2",{attrs:{id:"宏任务-微任务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#宏任务-微任务"}},[t._v("#")]),t._v(" 宏任务 & 微任务")]),t._v(" "),n("ol",[n("li",[t._v("异步任务分为两种：宏任务、微任务")]),t._v(" "),n("li",[t._v("两者包含\n"),n("img",{attrs:{src:a(343),alt:""}})]),t._v(" "),n("li",[n("strong",[t._v("优先执行"),n("code",[t._v("微任务")])]),t._v("，可以理解为：一个人去银行办理业务，一个业务办理完成后，柜员会问是否还有其他业务需要办理，这个时候的其他业务相当于是"),n("code",[t._v("微任务")]),t._v("，如果没有，才会继续叫号下一位("),n("code",[t._v("宏任务")]),t._v(")")])]),t._v(" "),n("h2",{attrs:{id:"浏览器的-event-loop"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#浏览器的-event-loop"}},[t._v("#")]),t._v(" 浏览器的 Event Loop")]),t._v(" "),n("ol",[n("li",[t._v("执行全局script的同步代码，形成一个"),n("code",[t._v("执行栈")]),t._v("; 碰到"),n("code",[t._v("异步代码")]),t._v("按"),n("code",[t._v("宏任务")]),t._v("和"),n("code",[t._v("微任务")]),t._v("区分，将"),n("code",[t._v("宏任务")]),t._v("加入"),n("code",[t._v("宏任务队列")]),t._v("，"),n("code",[t._v("微任务")]),t._v("加入"),n("code",[t._v("微任务队列")]),t._v("，"),n("code",[t._v("任务队列")]),t._v("的代码不立即执行")]),t._v(" "),n("li",[n("code",[t._v("执行栈")]),t._v("里的代码执行完毕后被清空，查看"),n("code",[t._v("微任务队列")]),t._v("是否有任务\n"),n("ol",[n("li",[t._v("若有，则将"),n("code",[t._v("微任务队列")]),t._v("加入"),n("code",[t._v("执行栈")]),t._v("，再在当前"),n("code",[t._v("执行栈")]),t._v("中，对"),n("code",[t._v("微任务")]),t._v("和"),n("code",[t._v("宏任务")]),t._v("按以上顺序循环执行，形成一个"),n("code",[t._v("Event Loop")])]),t._v(" "),n("li",[t._v("若无，则查看"),n("code",[t._v("宏任务队列")]),t._v("是否有任务\n"),n("ol",[n("li",[t._v("若有，则将"),n("code",[t._v("宏任务队列")]),t._v("加入"),n("code",[t._v("执行栈")]),t._v("，再在当前"),n("code",[t._v("执行栈")]),t._v("中，对"),n("code",[t._v("微任务")]),t._v("和"),n("code",[t._v("宏任务")]),t._v("按以上顺序循环执行，形成一个"),n("code",[t._v("Event Loop")])]),t._v(" "),n("li",[t._v("若无，则结束")])])])])])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'start'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'time1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    Pormise"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'promise1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'time2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    Pormise"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'promise2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nPormise"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'promise3'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 输出")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// start")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// end")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// promise3")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// time1")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// time2")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// promise1")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// promise2")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br")])]),n("h2",{attrs:{id:"html5提出的-web-worker-标准"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#html5提出的-web-worker-标准"}},[t._v("#")]),t._v(" HTML5提出的 Web Worker 标准")]),t._v(" "),n("ul",[n("li",[t._v("在独立于js主线程的后台线程中，执行一个新的脚本")]),t._v(" "),n("li",[t._v("不影响主线程，不影响js的单线程本质")])]),t._v(" "),n("h3",{attrs:{id:"web-worker-的限制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#web-worker-的限制"}},[t._v("#")]),t._v(" Web Worker 的限制")]),t._v(" "),n("ul",[n("li",[t._v("不能操作DOM: 新的线程下操作DOM，会产生浏览器渲染的同步问题；")]),t._v(" "),n("li",[t._v("不能使用"),n("code",[t._v("document")]),t._v(", "),n("code",[t._v("window")]),t._v(","),n("code",[t._v("parent")]),t._v("对象，但可以访问"),n("code",[t._v("location")]),t._v(", "),n("code",[t._v("navigator")]),t._v("对象")]),t._v(" "),n("li",[t._v("Worker线程与主线程必须是同源，且不能使用"),n("code",[t._v("file://")]),t._v("文件系统的文件")]),t._v(" "),n("li",[t._v("Worker线程与主线程之间，使用"),n("code",[t._v("postMessage")]),t._v("通讯")]),t._v(" "),n("li",[t._v("可以使用"),n("code",[t._v("XMLHttpRequest")]),t._v("对象发送"),n("code",[t._v("AJAX")]),t._v("请求")])]),t._v(" "),n("p",[n("a",{attrs:{href:"https://lacorda.github.io/demo.html#/index/web-worker",target:"_blank",rel:"noopener noreferrer"}},[t._v("Web Worker示例"),n("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);